var P=Object.create,v=Object.defineProperty,Q=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,Z=Object.getOwnPropertyNames,B=Object.getOwnPropertyDescriptor;var O=e=>v(e,"__esModule",{value:!0});var G=(e,a)=>{O(e);for(var n in a)v(e,n,{get:a[n],enumerable:!0})},J=(e,a,n)=>{if(O(e),a&&typeof a=="object"||typeof a=="function")for(let r of Z(a))!U.call(e,r)&&r!=="default"&&v(e,r,{get:()=>a[r],enumerable:!(n=B(a,r))||n.enumerable});return e},k=e=>e&&e.__esModule?e:J(v(e!=null?P(Q(e)):{},"default",{value:e,enumerable:!0}),e);G(exports,{Route:()=>I,active:()=>K,meta:()=>H,router:()=>b});var l=k(require("svelte/internal"));var W=k(require("svelte")),C=k(require("svelte/store")),d=k(require("svelte")),E=k(require("svelte/store"));function R(e,a=!1){return e=e.slice(e.startsWith("/#")?2:0,e.endsWith("/*")?-2:void 0),e.startsWith("/")||(e="/"+e),e==="/"&&(e=""),a&&!e.endsWith("/")&&(e+="/"),e}function A(e,a){e=R(e,!0),a=R(a,!0);let n=[],r={},t=!0,i=e.split("/").map(c=>c.startsWith(":")?(n.push(c.slice(1)),"([^\\/]+)"):c).join("\\/"),o=a.match(new RegExp(`^${i}$`));return o||(t=!1,o=a.match(new RegExp(`^${i}`))),o?(n.forEach((c,w)=>r[c]=o[w+1]),{exact:t,params:r,part:o[0].slice(0,-1)}):null}function M(e,a,n){if(n==="")return e;if(n[0]==="/")return n;let r=o=>o.split("/").filter(c=>c!==""),t=r(e),i=a?r(a):[];return"/"+i.map((o,c)=>t[c]).join("/")+"/"+n}function _(e,a,n,r){let t=[a,"data-"+a].reduce((i,o)=>{let c=e.getAttribute(o);return n&&e.removeAttribute(o),c===null?i:c},!1);return!r&&t===""?!0:t||r||!1}function V(e){let a=e.split("&").map(n=>n.split("=")).reduce((n,r)=>{let t=r[0];if(!t)return n;let i=r.length>1?r[r.length-1]:!0;return typeof i=="string"&&i.includes(",")&&(i=i.split(",")),n[t]===void 0?n[t]=[i]:n[t].push(i),n},{});return Object.entries(a).reduce((n,r)=>(n[r[0]]=r[1].length>1?r[1]:r[1][0],n),{})}function X(e){throw new Error("[Tinro] "+e)}var S=1,q=2,z=3,$=4;function tt(e,a,n,r){return e===S?a&&a():e===q?n&&n():r&&r()}function et(){return!window||window.location.pathname==="srcdoc"?z:S}var h={HISTORY:S,HASH:q,MEMORY:z,OFF:$,run:tt,getDeafault:et},F,x,p=rt();function rt(){let e=h.getDeafault(),a,n=i=>window.onhashchange=window.onpopstate=x=null,r=i=>a&&a(j(e));function t(i){i&&(e=i),n(),e!==h.OFF&&h.run(e,o=>window.onpopstate=r,o=>window.onhashchange=r)&&r()}return{mode:i=>t(i),get:i=>j(e),go(i){nt(e,i),r()},replace(i){at(e,i),r()},start(i){a=i,t()},stop(){a=null,t(h.OFF)}}}function at(e,a){h.run(e,n=>history.replaceState({},"",a),n=>window.location.hash=a,n=>x=a)}function nt(e,a){h.run(e,n=>history.pushState({},"",a),n=>window.location.hash=a,n=>x=a)}function j(e){let a=F,n=F=h.run(e,t=>window.location.pathname+window.location.search,t=>String(window.location.hash.slice(1)||"/"),t=>x||"/"),r=n.match(/^([^?#]+)(?:\?([^#]+))?(?:\#(.+))?$/);return{url:n,from:a,path:r[1]||"",query:V(r[2]||""),hash:r[3]||""}}function Y(e){let a=d.getContext("tinro");a&&(a.exact||a.fallback)&&X(`${e.fallback?"<Route fallback>":`<Route path="${e.path}">`}  can't be inside ${a.fallback?"<Route fallback>":`<Route path="${a.path||"/"}"> with exact path`}`);let n=e.fallback?"fallbacks":"childs",r=E.writable({}),t={router:{},exact:!1,pattern:null,meta:{},parent:a,fallback:e.fallback,redirect:!1,replace:!1,firstmatch:!1,breadcrumb:null,matched:!1,childs:new Set,activeChilds:new Set,fallbacks:new Set,update(i){t.exact=!i.path.endsWith("/*"),t.pattern=R(`${t.parent&&t.parent.pattern||""}${i.path}`),t.redirect=i.redirect,t.replace=i.replace,t.firstmatch=i.firstmatch,t.breadcrumb=i.breadcrumb,t.match()},register:()=>{if(t.parent)return t.parent[n].add(t),()=>{t.parent[n].delete(t),t.router.un&&t.router.un()}},show:()=>{e.onShow(),!t.fallback&&t.parent&&t.parent.activeChilds.add(t)},hide:()=>{e.onHide(),!t.fallback&&t.parent&&t.parent.activeChilds.delete(t)},match:async()=>{t.matched=!1;let{path:i,url:o,from:c,query:w}=t.router,u=A(t.pattern,i);if(!t.fallback&&u&&t.redirect&&(!t.exact||t.exact&&u.exact)){await d.tick();let f=M(i,t.parent&&t.parent.pattern,t.redirect);return t.replace?b.replaceWith(f):b.goto(f)}if(t.meta=u&&{from:c,url:o,query:w,match:u.part,pattern:t.pattern,breadcrumbs:t.parent&&t.parent.meta&&t.parent.meta.breadcrumbs.slice()||[],params:u.params,subscribe:r.subscribe},t.breadcrumb&&t.meta&&t.meta.breadcrumbs.push({name:t.breadcrumb,path:u.part}),r.set(t.meta),u&&!t.fallback&&(!t.exact||t.exact&&u.exact)&&(!t.parent||!t.parent.firstmatch||!t.parent.matched)?(e.onMeta(t.meta),t.parent&&(t.parent.matched=!0),t.show()):t.hide(),await d.tick(),u&&!t.fallback&&(t.childs.size>0&&t.activeChilds.size==0||t.childs.size==0&&t.fallbacks.size>0)){let f=t;for(;f.fallbacks.size==0;)if(f=f.parent,!f)return;f&&f.fallbacks.forEach(m=>{if(m.redirect){let g=M("/",m.parent&&m.parent.pattern,m.redirect);m.replace?b.replaceWith(g):b.goto(g)}else m.show()})}}};return d.setContext("tinro",t),d.onMount(()=>t.register()),t.router.un=b.subscribe(i=>{t.router.path=i.path,t.router.url=i.url,t.router.query=i.query,t.router.from=i.from,t.pattern!==null&&t.match()}),t}function H(){return d.getContext("tinro").meta}var b=it();function it(){let{subscribe:e}=C.writable(p.get(),a=>{p.start(a);let n=lt(p.go);return()=>{p.stop(),n()}});return{subscribe:e,goto:a=>p.go(a),replaceWith:a=>p.replace(a),params:ct,meta:H,useHashNavigation:a=>p.mode(a?h.HASH:h.HISTORY),mode:{hash:()=>p.mode(h.HASH),history:()=>p.mode(h.HISTORY),memory:()=>p.mode(h.MEMORY)}}}function K(e){let a=_(e,"href"),n=_(e,"exact",!0),r=_(e,"active-class",!0,"active");return{destroy:b.subscribe(t=>{let i=A(a,t.path);i&&(i.exact&&n||!n)?e.classList.add(r):e.classList.remove(r)})}}function lt(e){let a=n=>{let r=n.target.closest("a[href]"),t=r&&_(r,"target",!1,"_self"),i=r&&_(r,"tinro-ignore"),o=n.ctrlKey||n.metaKey||n.altKey||n.shiftKey;if(t=="_self"&&!i&&!o&&r){let c=r.getAttribute("href").replace(/^\/#/,"");/^\/\/|^[a-zA-Z]+:/.test(c)||(n.preventDefault(),e(c.startsWith("/")?c:r.href.replace(window.location.origin,"")))}};return addEventListener("click",a),()=>removeEventListener("click",a)}function ct(){return W.getContext("tinro").meta.params}var ot=e=>({params:e&2,meta:e&4}),L=e=>({params:e[1],meta:e[2]});function T(e){let a,n=e[10].default,r=l.create_slot(n,e,e[9],L);return{c(){r&&r.c()},m(t,i){r&&r.m(t,i),a=!0},p(t,i){r&&r.p&&i&518&&l.update_slot(r,n,t,t[9],i,ot,L)},i(t){a||(l.transition_in(r,t),a=!0)},o(t){l.transition_out(r,t),a=!1},d(t){r&&r.d(t)}}}function st(e){let a,n,r=e[0]&&T(e);return{c(){r&&r.c(),a=l.empty()},m(t,i){r&&r.m(t,i),l.insert(t,a,i),n=!0},p(t,[i]){t[0]?r?(r.p(t,i),i&1&&l.transition_in(r,1)):(r=T(t),r.c(),l.transition_in(r,1),r.m(a.parentNode,a)):r&&(l.group_outros(),l.transition_out(r,1,1,()=>{r=null}),l.check_outros())},i(t){n||(l.transition_in(r),n=!0)},o(t){l.transition_out(r),n=!1},d(t){r&&r.d(t),t&&l.detach(a)}}}function ut(e,a,n){let{$$slots:r={},$$scope:t}=a,{path:i="/*"}=a,{fallback:o=!1}=a,{redirect:c=!1}=a,{replace:w=!1}=a,{firstmatch:u=!1}=a,{breadcrumb:f=null}=a,m=!1,g={},y={},N=Y({fallback:o,onShow(){n(0,m=!0)},onHide(){n(0,m=!1)},onMeta(s){n(2,y=s),n(1,g=y.params)}});return e.$$set=s=>{"path"in s&&n(3,i=s.path),"fallback"in s&&n(4,o=s.fallback),"redirect"in s&&n(5,c=s.redirect),"replace"in s&&n(6,w=s.replace),"firstmatch"in s&&n(7,u=s.firstmatch),"breadcrumb"in s&&n(8,f=s.breadcrumb),"$$scope"in s&&n(9,t=s.$$scope)},e.$$.update=()=>{if(e.$$.dirty&488){t:N.update({path:i,redirect:c,replace:w,firstmatch:u,breadcrumb:f})}},[m,g,y,i,o,c,w,u,f,t,r]}var D=class extends l.SvelteComponent{constructor(a){super();l.init(this,a,ut,st,l.safe_not_equal,{path:3,fallback:4,redirect:5,replace:6,firstmatch:7,breadcrumb:8})}},I=D;
